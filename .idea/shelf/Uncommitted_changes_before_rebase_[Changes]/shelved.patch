Index: src/spotify/spotifyManager.h
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>//\n// Created by Harry Skerritt on 06/01/2026.\n//\n\n#ifndef SPOTIFYMANAGER_H\n#define SPOTIFYMANAGER_H\n\n#include <Arduino.h>\n#include <spotify/spotify.hpp>\n#include <ArduinoJson.h>\n\nclass SpotifyManager {\n\npublic:\n    static SpotifyManager& getInstance() {\n        static SpotifyManager instance;\n        return instance;\n    }\n\n\n    void init();\n\nprivate:\n    Spotify::Auth* spotifyAuth = nullptr;\n    String refresh_token;\n    String access_token;\n\n    void loadSpotifySecrets();\n};\n\n\n\n#endif //SPOTIFYMANAGER_H\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/spotify/spotifyManager.h b/src/spotify/spotifyManager.h
--- a/src/spotify/spotifyManager.h	(revision b8d6ec0c89b4c49e621612045c281993a443d60d)
+++ b/src/spotify/spotifyManager.h	(date 1767746634733)
@@ -5,27 +5,10 @@
 #ifndef SPOTIFYMANAGER_H
 #define SPOTIFYMANAGER_H
 
-#include <Arduino.h>
-#include <spotify/spotify.hpp>
-#include <ArduinoJson.h>
+
 
 class SpotifyManager {
 
-public:
-    static SpotifyManager& getInstance() {
-        static SpotifyManager instance;
-        return instance;
-    }
-
-
-    void init();
-
-private:
-    Spotify::Auth* spotifyAuth = nullptr;
-    String refresh_token;
-    String access_token;
-
-    void loadSpotifySecrets();
 };
 
 
Index: src/spotify/spotifyManager.cpp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>//\n// Created by Harry Skerritt on 06/01/2026.\n//\n\n#include \"spotifyManager.h\"\n#include <LittleFS.h>\n#include <WiFi.h>\n\n#include \"global_state.h\"\n\nSpotify::Auth spotify({ \"\", \"\" });\n\nvoid SpotifyManager::init() {\n    loadSpotifySecrets();\n\n    if (spotifyAuth != nullptr) {\n        // Is linked?\n        if (refresh_token.length() > 0) {\n            Serial.println(\"Spotify: Loaded existing refresh token.\");\n            networkState.spotify_linked = true;\n            //networkState.show_success_trigger = true;\n        } else {\n            Serial.println(\"Spotify: No saved token. Starting Linking\");\n\n            String ip = WiFi.localIP().toString().c_str();\n            String redirect = \"http://\" + ip + \":8888/callback\";\n\n            networkState.spotify_auth_url = spotifyAuth->createAuthoriseURL(redirect.c_str(),\n                {\n                    Spotify::Scope::UserReadPrivate,\n                    Spotify::Scope::UserReadEmail,\n                    Spotify::Scope::UserReadCurrentlyPlaying,\n                    Spotify::Scope::UserReadPlaybackState,\n                    Spotify::Scope::UserReadPlaybackPosition\n                }\n            ).c_str();\n            networkState.spotify_linked = false;\n            networkState.show_qr_trigger = true;\n        }\n    }\n}\n\n// Helpers\nvoid SpotifyManager::loadSpotifySecrets() {\n    if (!LittleFS.exists(\"/secrets.json\")) {\n        Serial.println(\"Spotify: secrets.json NOT FOUND!\");\n        deviceState.fatal_error_trigger = true;\n        return;\n    }\n\n    File file = LittleFS.open(\"/secrets.json\", \"r\");\n    JsonDocument doc;\n    DeserializationError error = deserializeJson(doc, file);\n    file.close();\n\n    if (error) {\n        Serial.println(\"Spotify: Failed to parse secrets.json\");\n        deviceState.fatal_error_trigger = true;\n        return;\n    }\n\n    String id = doc[\"spotify_client_id\"].as<String>();\n    String secret = doc[\"spotify_client_secret\"].as<String>();\n\n    // Check for a token\n    refresh_token = doc[\"spotify_refresh_token\"].as<String>();\n\n    if (id.length() > 0 && secret.length() > 0) {\n        // Dynamically create the Auth object\n        spotifyAuth = new Spotify::Auth({id.c_str(), secret.c_str()});\n        Serial.println(\"Spotify: Auth object ready with secrets.\");\n    }\n}\n\n\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/spotify/spotifyManager.cpp b/src/spotify/spotifyManager.cpp
--- a/src/spotify/spotifyManager.cpp	(revision b8d6ec0c89b4c49e621612045c281993a443d60d)
+++ b/src/spotify/spotifyManager.cpp	(date 1767746634733)
@@ -2,74 +2,4 @@
 // Created by Harry Skerritt on 06/01/2026.
 //
 
-#include "spotifyManager.h"
-#include <LittleFS.h>
-#include <WiFi.h>
-
-#include "global_state.h"
-
-Spotify::Auth spotify({ "", "" });
-
-void SpotifyManager::init() {
-    loadSpotifySecrets();
-
-    if (spotifyAuth != nullptr) {
-        // Is linked?
-        if (refresh_token.length() > 0) {
-            Serial.println("Spotify: Loaded existing refresh token.");
-            networkState.spotify_linked = true;
-            //networkState.show_success_trigger = true;
-        } else {
-            Serial.println("Spotify: No saved token. Starting Linking");
-
-            String ip = WiFi.localIP().toString().c_str();
-            String redirect = "http://" + ip + ":8888/callback";
-
-            networkState.spotify_auth_url = spotifyAuth->createAuthoriseURL(redirect.c_str(),
-                {
-                    Spotify::Scope::UserReadPrivate,
-                    Spotify::Scope::UserReadEmail,
-                    Spotify::Scope::UserReadCurrentlyPlaying,
-                    Spotify::Scope::UserReadPlaybackState,
-                    Spotify::Scope::UserReadPlaybackPosition
-                }
-            ).c_str();
-            networkState.spotify_linked = false;
-            networkState.show_qr_trigger = true;
-        }
-    }
-}
-
-// Helpers
-void SpotifyManager::loadSpotifySecrets() {
-    if (!LittleFS.exists("/secrets.json")) {
-        Serial.println("Spotify: secrets.json NOT FOUND!");
-        deviceState.fatal_error_trigger = true;
-        return;
-    }
-
-    File file = LittleFS.open("/secrets.json", "r");
-    JsonDocument doc;
-    DeserializationError error = deserializeJson(doc, file);
-    file.close();
-
-    if (error) {
-        Serial.println("Spotify: Failed to parse secrets.json");
-        deviceState.fatal_error_trigger = true;
-        return;
-    }
-
-    String id = doc["spotify_client_id"].as<String>();
-    String secret = doc["spotify_client_secret"].as<String>();
-
-    // Check for a token
-    refresh_token = doc["spotify_refresh_token"].as<String>();
-
-    if (id.length() > 0 && secret.length() > 0) {
-        // Dynamically create the Auth object
-        spotifyAuth = new Spotify::Auth({id.c_str(), secret.c_str()});
-        Serial.println("Spotify: Auth object ready with secrets.");
-    }
-}
-
-
+#include "SpotifyManager.h"
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project version=\"4\">\n  <component name=\"AutoImportSettings\">\n    <option name=\"autoReloadType\" value=\"SELECTIVE\" />\n  </component>\n  <component name=\"BackendCodeEditorMiscSettings\">\n    <option name=\"/Default/Environment/Hierarchy/GeneratedFilesCacheKey/Timestamp/@EntryValue\" value=\"3\" type=\"long\" />\n    <option name=\"/Default/Housekeeping/FeatureSuggestion/FeatureSuggestionManager/DisabledSuggesters/=SwitchToGoToActionSuggester/@EntryIndexedValue\" value=\"true\" type=\"bool\" />\n    <option name=\"/Default/Housekeeping/GlobalSettingsUpgraded/IsUpgraded/@EntryValue\" value=\"true\" type=\"bool\" />\n    <option name=\"/Default/RiderDebugger/RiderRestoreDecompile/RestoreDecompileSetting/@EntryValue\" value=\"false\" type=\"bool\" />\n  </component>\n  <component name=\"CMakeProjectFlavorService\">\n    <option name=\"flavorId\" value=\"CMakePlainProjectFlavor\" />\n  </component>\n  <component name=\"CMakeRunConfigurationManager\">\n    <generated>\n      <config projectName=\"SpotifyMate2\" targetName=\"PlatformIO\" />\n    </generated>\n  </component>\n  <component name=\"CMakeSettings\">\n    <configurations>\n      <configuration PROFILE_NAME=\"Debug\" ENABLED=\"true\" CONFIG_NAME=\"Debug\" />\n    </configurations>\n  </component>\n  <component name=\"ChangeListManager\">\n    <list default=\"true\" id=\"c49142d0-ce73-443d-9b1c-5099a514e861\" name=\"Changes\" comment=\"Tried abstracting\">\n      <change afterPath=\"$PROJECT_DIR$/src/network/WifiManager.cpp\" afterDir=\"false\" />\n      <change afterPath=\"$PROJECT_DIR$/src/network/WifiManager.h\" afterDir=\"false\" />\n      <change afterPath=\"$PROJECT_DIR$/src/spotify/SpotifyManager.cpp\" afterDir=\"false\" />\n      <change afterPath=\"$PROJECT_DIR$/src/spotify/SpotifyManager.h\" afterDir=\"false\" />\n      <change afterPath=\"$PROJECT_DIR$/src/system/SystemManager.cpp\" afterDir=\"false\" />\n      <change afterPath=\"$PROJECT_DIR$/src/system/SystemManager.h\" afterDir=\"false\" />\n      <change afterPath=\"$PROJECT_DIR$/src/ui/UIManager.cpp\" afterDir=\"false\" />\n      <change afterPath=\"$PROJECT_DIR$/src/ui/UIManager.h\" afterDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/.gitignore\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.gitignore\" afterDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/include/global_state.h\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/include/global_state.h\" afterDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/platformio.ini\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/platformio.ini\" afterDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/src/main.cpp\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/main.cpp\" afterDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/src/network/wifiManager.cpp\" beforeDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/src/network/wifiManager.h\" beforeDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/src/ui/uiManager.cpp\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/dep/uiManager.cpp\" afterDir=\"false\" />\n      <change beforePath=\"$PROJECT_DIR$/src/ui/uiManager.h\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/dep/uiManager.h\" afterDir=\"false\" />\n    </list>\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\n  </component>\n  <component name=\"ClangdSettings\">\n    <option name=\"formatViaClangd\" value=\"false\" />\n  </component>\n  <component name=\"ExecutionTargetManager\" SELECTED_TARGET=\"waveshare_5\" />\n  <component name=\"ExternalProjectsData\">\n    <projectState path=\"$PROJECT_DIR$\">\n      <ProjectState />\n    </projectState>\n  </component>\n  <component name=\"Git.Settings\">\n    <option name=\"RECENT_BRANCH_BY_REPOSITORY\">\n      <map>\n        <entry key=\"$PROJECT_DIR$\" value=\"Fix-Core-0\" />\n      </map>\n    </option>\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\n    <option name=\"RESET_MODE\" value=\"HARD\" />\n  </component>\n  <component name=\"GitHubPullRequestSearchHistory\"><![CDATA[{\n  \"history\": [\n    {\n      \"state\": \"OPEN\"\n    }\n  ],\n  \"lastFilter\": {\n    \"state\": \"OPEN\"\n  }\n}]]></component>\n  <component name=\"GitHubPullRequestState\"><![CDATA[{\n  \"prStates\": [\n    {\n      \"id\": {\n        \"id\": \"PR_kwDOQ0LHSM670PKe\",\n        \"number\": 2\n      },\n      \"lastSeen\": 1767746588296\n    }\n  ]\n}]]></component>\n  <component name=\"GithubPullRequestsUISettings\">{\n  &quot;selectedUrlAndAccountId&quot;: {\n    &quot;url&quot;: &quot;https://github.com/Harry-Skerritt/SpotifyMate2.git&quot;,\n    &quot;accountId&quot;: &quot;5f314702-d3bf-4e2a-9560-968f32bc1895&quot;\n  }\n}</component>\n  <component name=\"PlatformioLocalSettings\">\n    <option name=\"availableProjects\">\n      <map>\n        <entry>\n          <key>\n            <ExternalProjectPojo>\n              <option name=\"name\" value=\"SpotifyMate2\" />\n              <option name=\"path\" value=\"$PROJECT_DIR$\" />\n            </ExternalProjectPojo>\n          </key>\n          <value>\n            <list>\n              <ExternalProjectPojo>\n                <option name=\"name\" value=\"SpotifyMate2\" />\n                <option name=\"path\" value=\"$PROJECT_DIR$\" />\n              </ExternalProjectPojo>\n            </list>\n          </value>\n        </entry>\n      </map>\n    </option>\n    <option name=\"projectSyncType\">\n      <map>\n        <entry key=\"$PROJECT_DIR$\" value=\"RE_IMPORT\" />\n      </map>\n    </option>\n  </component>\n  <component name=\"ProjectApplicationVersion\">\n    <option name=\"ide\" value=\"CLion\" />\n    <option name=\"majorVersion\" value=\"2025\" />\n    <option name=\"minorVersion\" value=\"1.1\" />\n    <option name=\"productBranch\" value=\"Classic\" />\n  </component>\n  <component name=\"ProjectColorInfo\">{\n  &quot;associatedIndex&quot;: 6\n}</component>\n  <component name=\"ProjectId\" id=\"37qMpzjbOlhIu3lLIpZf0dV2fu5\" />\n  <component name=\"ProjectViewState\">\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\n    <option name=\"showLibraryContents\" value=\"true\" />\n  </component>\n  <component name=\"PropertiesComponent\"><![CDATA[{\n  \"keyToString\": {\n    \"ASKED_MARK_IGNORED_FILES_AS_EXCLUDED\": \"true\",\n    \"ModuleVcsDetector.initialDetectionPerformed\": \"true\",\n    \"PlatformIO.PlatformIO.executor\": \"Run\",\n    \"RunOnceActivity.RadMigrateCodeStyle\": \"true\",\n    \"RunOnceActivity.ShowReadmeOnStart\": \"true\",\n    \"RunOnceActivity.cidr.known.project.marker\": \"true\",\n    \"RunOnceActivity.git.unshallow\": \"true\",\n    \"RunOnceActivity.readMode.enableVisualFormatting\": \"true\",\n    \"cf.first.check.clang-format\": \"false\",\n    \"cidr.known.project.marker\": \"true\",\n    \"git-widget-placeholder\": \"#2 on Rebasing Fix-Core-0\",\n    \"last_opened_file_path\": \"/Volumes/Data/Code/C++/2026/SpotifyMate2/src\",\n    \"node.js.detected.package.eslint\": \"true\",\n    \"node.js.detected.package.tslint\": \"true\",\n    \"node.js.selected.package.eslint\": \"(autodetect)\",\n    \"node.js.selected.package.tslint\": \"(autodetect)\",\n    \"nodejs_package_manager_path\": \"npm\",\n    \"run.code.analysis.last.selected.profile\": \"pProject Default\",\n    \"vue.rearranger.settings.migration\": \"true\"\n  }\n}]]></component>\n  <component name=\"RecentsManager\">\n    <key name=\"CopyFile.RECENT_KEYS\">\n      <recent name=\"$PROJECT_DIR$/src\" />\n    </key>\n    <key name=\"MoveFile.RECENT_KEYS\">\n      <recent name=\"$PROJECT_DIR$/dep\" />\n      <recent name=\"$PROJECT_DIR$/src/ui/fonts\" />\n      <recent name=\"$PROJECT_DIR$/lib\" />\n      <recent name=\"$PROJECT_DIR$/include\" />\n      <recent name=\"$PROJECT_DIR$/src/ui\" />\n    </key>\n  </component>\n  <component name=\"RunManager\">\n    <configuration default=\"true\" type=\"CLionExternalRunConfiguration\" factoryName=\"Application\" REDIRECT_INPUT=\"false\" ELEVATE=\"false\" USE_EXTERNAL_CONSOLE=\"false\" EMULATE_TERMINAL=\"false\" PASS_PARENT_ENVS_2=\"true\">\n      <method v=\"2\">\n        <option name=\"CLION.EXTERNAL.BUILD\" enabled=\"true\" />\n      </method>\n    </configuration>\n    <configuration name=\"PlatformIO\" type=\"platformio\" factoryName=\"PlatformIO Debug\" REDIRECT_INPUT=\"false\" ELEVATE=\"false\" USE_EXTERNAL_CONSOLE=\"false\" EMULATE_TERMINAL=\"false\" PASS_PARENT_ENVS_2=\"true\" PROJECT_NAME=\"SpotifyMate2\" TARGET_NAME=\"PlatformIO\" CONFIG_NAME=\"PlatformIO\">\n      <method v=\"2\" />\n    </configuration>\n    <configuration name=\"PlatformIO\" type=\"platformio\" factoryName=\"PlatformIO Debug\" REDIRECT_INPUT=\"false\" ELEVATE=\"false\" USE_EXTERNAL_CONSOLE=\"false\" EMULATE_TERMINAL=\"false\" PASS_PARENT_ENVS_2=\"true\" PROJECT_NAME=\"SpotifyMate2\" TARGET_NAME=\"PlatformIO\" CONFIG_NAME=\"PlatformIO\">\n      <method v=\"2\" />\n    </configuration>\n    <configuration name=\"PlatformIO\" type=\"platformio\" factoryName=\"PlatformIO Debug\" REDIRECT_INPUT=\"false\" ELEVATE=\"false\" USE_EXTERNAL_CONSOLE=\"false\" EMULATE_TERMINAL=\"false\" PASS_PARENT_ENVS_2=\"true\" PROJECT_NAME=\"SpotifyMate2\" TARGET_NAME=\"PlatformIO\" CONFIG_NAME=\"PlatformIO\">\n      <method v=\"2\" />\n    </configuration>\n    <configuration name=\"PlatformIO\" type=\"platformio\" factoryName=\"PlatformIO Debug\" REDIRECT_INPUT=\"false\" ELEVATE=\"false\" USE_EXTERNAL_CONSOLE=\"false\" EMULATE_TERMINAL=\"false\" PASS_PARENT_ENVS_2=\"true\" PROJECT_NAME=\"SpotifyMate2\" TARGET_NAME=\"PlatformIO\" CONFIG_NAME=\"PlatformIO\">\n      <method v=\"2\" />\n    </configuration>\n    <configuration name=\"PlatformIO\" type=\"platformio\" factoryName=\"PlatformIO Debug\" REDIRECT_INPUT=\"false\" ELEVATE=\"false\" USE_EXTERNAL_CONSOLE=\"false\" EMULATE_TERMINAL=\"false\" PASS_PARENT_ENVS_2=\"true\" PROJECT_NAME=\"SpotifyMate2\" TARGET_NAME=\"PlatformIO\" CONFIG_NAME=\"PlatformIO\">\n      <method v=\"2\" />\n    </configuration>\n    <configuration name=\"PlatformIO\" type=\"platformio\" factoryName=\"PlatformIO Debug\" REDIRECT_INPUT=\"false\" ELEVATE=\"false\" USE_EXTERNAL_CONSOLE=\"false\" EMULATE_TERMINAL=\"false\" PASS_PARENT_ENVS_2=\"true\" PROJECT_NAME=\"SpotifyMate2\" TARGET_NAME=\"PlatformIO\" CONFIG_NAME=\"PlatformIO\">\n      <method v=\"2\" />\n    </configuration>\n  </component>\n  <component name=\"TaskManager\">\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\n      <changelist id=\"c49142d0-ce73-443d-9b1c-5099a514e861\" name=\"Changes\" comment=\"\" />\n      <created>1767626334927</created>\n      <option name=\"number\" value=\"Default\" />\n      <option name=\"presentableId\" value=\"Default\" />\n      <updated>1767626334927</updated>\n      <workItem from=\"1767626336069\" duration=\"1242000\" />\n      <workItem from=\"1767627587180\" duration=\"14000\" />\n      <workItem from=\"1767627618534\" duration=\"5364000\" />\n      <workItem from=\"1767635617028\" duration=\"3883000\" />\n      <workItem from=\"1767640971506\" duration=\"36052000\" />\n      <workItem from=\"1767716356595\" duration=\"328000\" />\n      <workItem from=\"1767716699504\" duration=\"53000\" />\n      <workItem from=\"1767716793957\" duration=\"803000\" />\n      <workItem from=\"1767733927320\" duration=\"1486000\" />\n    </task>\n    <task id=\"LOCAL-00001\" summary=\"Got LVGL working with the display\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1767631658369</created>\n      <option name=\"number\" value=\"00001\" />\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1767631658369</updated>\n    </task>\n    <task id=\"LOCAL-00002\" summary=\"Tested WiFi\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1767636022442</created>\n      <option name=\"number\" value=\"00002\" />\n      <option name=\"presentableId\" value=\"LOCAL-00002\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1767636022442</updated>\n    </task>\n    <task id=\"LOCAL-00003\" summary=\"Added a filesystem and a config file to load wifi creds\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1767637978488</created>\n      <option name=\"number\" value=\"00003\" />\n      <option name=\"presentableId\" value=\"LOCAL-00003\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1767637978488</updated>\n    </task>\n    <task id=\"LOCAL-00004\" summary=\"Set up the project structure, and abstracted. Also added FreeRTOS\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1767643903962</created>\n      <option name=\"number\" value=\"00004\" />\n      <option name=\"presentableId\" value=\"LOCAL-00004\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1767643903962</updated>\n    </task>\n    <task id=\"LOCAL-00005\" summary=\"Added the UI file and added a splash screen\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1767645725507</created>\n      <option name=\"number\" value=\"00005\" />\n      <option name=\"presentableId\" value=\"LOCAL-00005\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1767645725507</updated>\n    </task>\n    <task id=\"LOCAL-00006\" summary=\"Bunch of errors\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1767656967652</created>\n      <option name=\"number\" value=\"00006\" />\n      <option name=\"presentableId\" value=\"LOCAL-00006\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1767656967652</updated>\n    </task>\n    <task id=\"LOCAL-00007\" summary=\"Adding missed files\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1767659504356</created>\n      <option name=\"number\" value=\"00007\" />\n      <option name=\"presentableId\" value=\"LOCAL-00007\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1767659504356</updated>\n    </task>\n    <task id=\"LOCAL-00008\" summary=\"Fully reverted back to a 'stable' point\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1767659530866</created>\n      <option name=\"number\" value=\"00008\" />\n      <option name=\"presentableId\" value=\"LOCAL-00008\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1767659530866</updated>\n    </task>\n    <task id=\"LOCAL-00009\" summary=\"Added the network failure screen - not added button functionality\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1767661038688</created>\n      <option name=\"number\" value=\"00009\" />\n      <option name=\"presentableId\" value=\"LOCAL-00009\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1767661038688</updated>\n    </task>\n    <task id=\"LOCAL-00010\" summary=\"Started adding screen transitions - bug with touch\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1767662757598</created>\n      <option name=\"number\" value=\"00010\" />\n      <option name=\"presentableId\" value=\"LOCAL-00010\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1767662757598</updated>\n    </task>\n    <task id=\"LOCAL-00011\" summary=\"Fixed some of the touch bugs for now, still more to fix\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1767663458513</created>\n      <option name=\"number\" value=\"00011\" />\n      <option name=\"presentableId\" value=\"LOCAL-00011\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1767663458513</updated>\n    </task>\n    <task id=\"LOCAL-00012\" summary=\"Fixed touch screen jittering\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1767703903771</created>\n      <option name=\"number\" value=\"00012\" />\n      <option name=\"presentableId\" value=\"LOCAL-00012\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1767703903771</updated>\n    </task>\n    <task id=\"LOCAL-00013\" summary=\"Neatened up UIManager\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1767705484391</created>\n      <option name=\"number\" value=\"00013\" />\n      <option name=\"presentableId\" value=\"LOCAL-00013\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1767705484391</updated>\n    </task>\n    <task id=\"LOCAL-00014\" summary=\"Added the error screen\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1767707355103</created>\n      <option name=\"number\" value=\"00014\" />\n      <option name=\"presentableId\" value=\"LOCAL-00014\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1767707355103</updated>\n    </task>\n    <task id=\"LOCAL-00015\" summary=\"Started adding the wifi onboarding\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1767709422738</created>\n      <option name=\"number\" value=\"00015\" />\n      <option name=\"presentableId\" value=\"LOCAL-00015\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1767709422738</updated>\n    </task>\n    <task id=\"LOCAL-00016\" summary=\"Added WiFi scanning and the displaying of networks\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1767710452106</created>\n      <option name=\"number\" value=\"00016\" />\n      <option name=\"presentableId\" value=\"LOCAL-00016\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1767710452106</updated>\n    </task>\n    <task id=\"LOCAL-00017\" summary=\"Added network onboarding\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1767711728872</created>\n      <option name=\"number\" value=\"00017\" />\n      <option name=\"presentableId\" value=\"LOCAL-00017\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1767711728872</updated>\n    </task>\n    <task id=\"LOCAL-00018\" summary=\"Added wifi handling for existing credentials, and added a factory reset option\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1767713097502</created>\n      <option name=\"number\" value=\"00018\" />\n      <option name=\"presentableId\" value=\"LOCAL-00018\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1767713097505</updated>\n    </task>\n    <task id=\"LOCAL-00019\" summary=\"Added the spotify linking page\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1767714200046</created>\n      <option name=\"number\" value=\"00019\" />\n      <option name=\"presentableId\" value=\"LOCAL-00019\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1767714200046</updated>\n    </task>\n    <task id=\"LOCAL-00020\" summary=\"Changes to flow\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1767715195056</created>\n      <option name=\"number\" value=\"00020\" />\n      <option name=\"presentableId\" value=\"LOCAL-00020\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1767715195056</updated>\n    </task>\n    <task id=\"LOCAL-00021\" summary=\"Fixed gitignore issues + updated spotify lib\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1767736404069</created>\n      <option name=\"number\" value=\"00021\" />\n      <option name=\"presentableId\" value=\"LOCAL-00021\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1767736404069</updated>\n    </task>\n    <task id=\"LOCAL-00022\" summary=\"Tried abstracting\">\n      <option name=\"closed\" value=\"true\" />\n      <created>1767740248955</created>\n      <option name=\"number\" value=\"00022\" />\n      <option name=\"presentableId\" value=\"LOCAL-00022\" />\n      <option name=\"project\" value=\"LOCAL\" />\n      <updated>1767740248955</updated>\n    </task>\n    <option name=\"localTasksCounter\" value=\"23\" />\n    <servers />\n  </component>\n  <component name=\"TypeScriptGeneratedFilesManager\">\n    <option name=\"version\" value=\"3\" />\n  </component>\n  <component name=\"Vcs.Log.Tabs.Properties\">\n    <option name=\"TAB_STATES\">\n      <map>\n        <entry key=\"MAIN\">\n          <value>\n            <State />\n          </value>\n        </entry>\n      </map>\n    </option>\n  </component>\n  <component name=\"VcsManagerConfiguration\">\n    <MESSAGE value=\"Got LVGL working with the display\" />\n    <MESSAGE value=\"Tested WiFi\" />\n    <MESSAGE value=\"Added a filesystem and a config file to load wifi creds\" />\n    <MESSAGE value=\"Set up the project structure, and abstracted. Also added FreeRTOS\" />\n    <MESSAGE value=\"Added the UI file and added a splash screen\" />\n    <MESSAGE value=\"Bunch of errors\" />\n    <MESSAGE value=\"Rolled back to when it worked - no TinyTTF\" />\n    <MESSAGE value=\"Adding missed files\" />\n    <MESSAGE value=\"Fully reverted back to a 'stable' point\" />\n    <MESSAGE value=\"Added the network failure screen - not added button functionality\" />\n    <MESSAGE value=\"Started adding screen transitions - bug with touch\" />\n    <MESSAGE value=\"Fixed some of the touch bugs for now, still more to fix\" />\n    <MESSAGE value=\"Fixed touch screen jittering\" />\n    <MESSAGE value=\"Neatened up UIManager\" />\n    <MESSAGE value=\"Added the error screen\" />\n    <MESSAGE value=\"Started adding the wifi onboarding\" />\n    <MESSAGE value=\"Added WiFi scanning and the displaying of networks\" />\n    <MESSAGE value=\"Added network onboarding\" />\n    <MESSAGE value=\"Added wifi handling for existing credentials, and added a factory reset option\" />\n    <MESSAGE value=\"Added the spotify linking page\" />\n    <MESSAGE value=\"Changes to flow\" />\n    <MESSAGE value=\"Fixed gitignore issues + updated spotify lib\" />\n    <MESSAGE value=\"Tried abstracting\" />\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"Tried abstracting\" />\n  </component>\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	(revision b8d6ec0c89b4c49e621612045c281993a443d60d)
+++ b/.idea/workspace.xml	(date 1767746642901)
@@ -24,23 +24,8 @@
   </component>
   <component name="ChangeListManager">
     <list default="true" id="c49142d0-ce73-443d-9b1c-5099a514e861" name="Changes" comment="Tried abstracting">
-      <change afterPath="$PROJECT_DIR$/src/network/WifiManager.cpp" afterDir="false" />
-      <change afterPath="$PROJECT_DIR$/src/network/WifiManager.h" afterDir="false" />
-      <change afterPath="$PROJECT_DIR$/src/spotify/SpotifyManager.cpp" afterDir="false" />
-      <change afterPath="$PROJECT_DIR$/src/spotify/SpotifyManager.h" afterDir="false" />
-      <change afterPath="$PROJECT_DIR$/src/system/SystemManager.cpp" afterDir="false" />
-      <change afterPath="$PROJECT_DIR$/src/system/SystemManager.h" afterDir="false" />
-      <change afterPath="$PROJECT_DIR$/src/ui/UIManager.cpp" afterDir="false" />
-      <change afterPath="$PROJECT_DIR$/src/ui/UIManager.h" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/.gitignore" beforeDir="false" afterPath="$PROJECT_DIR$/.gitignore" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/include/global_state.h" beforeDir="false" afterPath="$PROJECT_DIR$/include/global_state.h" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/platformio.ini" beforeDir="false" afterPath="$PROJECT_DIR$/platformio.ini" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/main.cpp" beforeDir="false" afterPath="$PROJECT_DIR$/src/main.cpp" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/network/wifiManager.cpp" beforeDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/network/wifiManager.h" beforeDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/ui/uiManager.cpp" beforeDir="false" afterPath="$PROJECT_DIR$/dep/uiManager.cpp" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/ui/uiManager.h" beforeDir="false" afterPath="$PROJECT_DIR$/dep/uiManager.h" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/spotify/spotifyManager.cpp" beforeDir="false" afterPath="$PROJECT_DIR$/src/spotify/spotifyManager.cpp" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/spotify/spotifyManager.h" beforeDir="false" afterPath="$PROJECT_DIR$/src/spotify/spotifyManager.h" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
@@ -65,27 +50,27 @@
     <option name="RECENT_GIT_ROOT_PATH" value="$PROJECT_DIR$" />
     <option name="RESET_MODE" value="HARD" />
   </component>
-  <component name="GitHubPullRequestSearchHistory"><![CDATA[{
-  "history": [
+  <component name="GitHubPullRequestSearchHistory">{
+  &quot;history&quot;: [
     {
-      "state": "OPEN"
+      &quot;state&quot;: &quot;OPEN&quot;
     }
   ],
-  "lastFilter": {
-    "state": "OPEN"
+  &quot;lastFilter&quot;: {
+    &quot;state&quot;: &quot;OPEN&quot;
   }
-}]]></component>
-  <component name="GitHubPullRequestState"><![CDATA[{
-  "prStates": [
+}</component>
+  <component name="GitHubPullRequestState">{
+  &quot;prStates&quot;: [
     {
-      "id": {
-        "id": "PR_kwDOQ0LHSM670PKe",
-        "number": 2
+      &quot;id&quot;: {
+        &quot;id&quot;: &quot;PR_kwDOQ0LHSM670PKe&quot;,
+        &quot;number&quot;: 2
       },
-      "lastSeen": 1767746588296
+      &quot;lastSeen&quot;: 1767746588296
     }
   ]
-}]]></component>
+}</component>
   <component name="GithubPullRequestsUISettings">{
   &quot;selectedUrlAndAccountId&quot;: {
     &quot;url&quot;: &quot;https://github.com/Harry-Skerritt/SpotifyMate2.git&quot;,
@@ -145,7 +130,7 @@
     "RunOnceActivity.readMode.enableVisualFormatting": "true",
     "cf.first.check.clang-format": "false",
     "cidr.known.project.marker": "true",
-    "git-widget-placeholder": "#2 on Rebasing Fix-Core-0",
+    "git-widget-placeholder": "#2 on Fix-Core-0",
     "last_opened_file_path": "/Volumes/Data/Code/C++/2026/SpotifyMate2/src",
     "node.js.detected.package.eslint": "true",
     "node.js.detected.package.tslint": "true",
